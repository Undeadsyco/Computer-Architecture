
(()=>{"use strict";class t{#t;#e;constructor(t){this.#t=t,this.#e=t.timer,addEventListener("mousemove",(t=>{t.preventDefault(),this.#t.detectMouseMove(t.x,t.y),this.#t.ui.detectMouseOver(),this.#t.gates.forEach((t=>{t.detectMouseOver()})),this.#t.switches.forEach((t=>{t.detectMouseOver()}))})),addEventListener("click",(t=>{this.#t.ui.detectClick(),(this.#t.timer-this.#e)/1e3>.5&&(this.#t.gates.forEach((t=>{t.detectClick(this.#t.mousePos.x,this.#t.mousePos.y)})),this.#t.switches.forEach((t=>{t.detectClick(this.#t.mousePos.x,this.#t.mousePos.y)})),this.#t.wires.forEach((t=>{t.detectClick(this.#t.mousePos.x,this.#t.mousePos.y)}))),this.#e=this.#t.timer})),addEventListener("dblclick",(t=>{this.#t.wires.forEach((t=>{t.detectDbClick()}))})),addEventListener("mousedown",(()=>{this.#t.ui.detectMouseDown(),this.#t.gates.forEach((t=>{t.detectMouseDown()})),this.#t.switches.forEach((t=>{t.detectMouseDown()}))})),addEventListener("mouseup",(()=>{this.#t.gates.forEach((t=>{t.detectMouseUp()})),this.#t.switches.forEach((t=>{t.detectMouseUp()}))}))}}const e={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let i;const s=new Uint8Array(16);function h(){if(!i&&(i="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!i))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return i(s)}const r=[];for(let t=0;t<256;++t)r.push((t+256).toString(16).slice(1));const u=function(t,i,s){if(e.randomUUID&&!i&&!t)return e.randomUUID();const u=(t=t||{}).random||(t.rng||h)();if(u[6]=15&u[6]|64,u[8]=63&u[8]|128,i){s=s||0;for(let t=0;t<16;++t)i[s+t]=u[t];return i}return function(t,e=0){return(r[t[e+0]]+r[t[e+1]]+r[t[e+2]]+r[t[e+3]]+"-"+r[t[e+4]]+r[t[e+5]]+"-"+r[t[e+6]]+r[t[e+7]]+"-"+r[t[e+8]]+r[t[e+9]]+"-"+r[t[e+10]]+r[t[e+11]]+r[t[e+12]]+r[t[e+13]]+r[t[e+14]]+r[t[e+15]]).toLowerCase()}(u)};class o{static draw(t,{x:e,y:i},s,h){t.save(),t.beginPath(),t.strokeStyle="black",t.fillStyle="blue",t.rect(e,i,s,h),t.fill(),t.stroke(),t.restore()}#t;#i;#s;#h;#r;#u;#o;#n;#a;#d;#c;#l;#g;constructor(t,e,i,s,h){this.#t=t,this.#i=u(),this.#s=e,this.#h=i,this.#r=s,this.#u=h,this.#n="black",this.#a="black",this.#d=!1,this.#c=!1,this.#l=!1,this.#g=!1}get game(){return this.#t}get id(){return this.id}get x(){return this.#s}set x(t){this.isStatic||(this.#s=t)}get y(){return this.#h}set y(t){this.isStatic||(this.#h=t)}get width(){return this.#r}set width(t){this.#r=t}get height(){return this.#u}set height(t){this.#u=t}get radius(){return this.#o}set radius(t){this.#o=t}get bgColor(){return this.#n}set bgColor(t){this.#n=t}get borderColor(){return this.#a}set borderColor(t){this.#a=t}get outline(){return this.#d}set outline(t){this.#d=t}toggleOutline(){this.#d=!this.#d}get draggable(){return this.#c}set draggable(t){this.#c=t}toggleDraggable(){this.#c=!this.#c}get isStatic(){return this.#l}set isStatic(t){this.#l=t}toggleStatic(){this.#l=!this.#l}get shouldDelete(){return this.#g}set shouldDelete(t){this.#g=t}update(){this.#c&&!this.#l&&(this.#s=this.#t.mousePos.x-.5*this.#r,this.#h=this.#t.mousePos.y-.5*this.#u)}draw(t){this.#d&&(t.save(),t.strokeStyle="black",t.rect(this.#s,this.#h,this.#r,this.#u),t.stroke(),t.restore())}detectMouseOver(){}detectMouseDown(){}detectMouseUp(){}detectClick(t,e){}detectDbClick(){}}class n extends o{#p;#w;constructor(t,e,i,s,h){super(t,e,i,s,h)}get inputs(){return this.#p}set inputs(t){this.#p=t}get outputs(){return this.#w}set outputs(t){this.#w=t}update(){super.update()}draw(t){super.draw(t)}detectMouseOver(){if(super.detectMouseOver(),!this.game.wireMode&&this.game.detectMouseOver(this))document.getElementById("canvasContainer")?.classList.add("curser-grab");else if(this.game.wireMode){const t=this.inputs.length>=this.#w.length?this.inputs.length:this.#w.length;for(let e=0;e<t;e+=1)this.#p[e]&&this.game.detectMouseOver({x:this.#p[e].x-5,y:this.#p[e].y-5,width:15,height:15})&&this.game.wireMode&&document.getElementById("canvasContainer")?.classList.add("curser-pointer"),this.#w[e]&&this.game.detectMouseOver({x:this.#w[e].x-5,y:this.#w[e].y-5,width:15,height:15})&&this.game.wireMode&&document.getElementById("canvasContainer")?.classList.add("curser-pointer")}}detectMouseDown(){super.detectMouseDown()}detectMouseUp(){super.detectMouseUp()}detectClick(t,e){super.detectClick(t,e)}detectDbClick(){super.detectDbClick()}}class a extends n{#m;#y;constructor(t,e,i){super(t,e,i,40,24),this.#y=!0,this.#m={type:"output1",value:0,visible:!0,x:e+this.width,y:i+.5*this.height},this.inputs=[],this.outputs=[this.#m]}get output(){return this.#m}get isActive(){return this.#y}toggleActive(){this.#y=!this.#y}update(){super.update(),this.#y?this.#m.value=1:this.#m.value=0}draw(t){super.draw(t),t.save(),t.font="12px Helvetica",t.fillStyle="gray",t.beginPath(),t.strokeRect(this.x,this.y,this.width,this.height),t.strokeRect(this.x+5,this.y+5,this.width-10,this.height-10),t.stroke(),this.#m.visible&&this.game.wireMode&&(t.beginPath(),t.arc(this.#m.x,this.#m.y,5,0,Math.PI,!1),t.stroke()),t.strokeText(this.#y?"ON":"OFF",this.x+.25*this.width,this.y+.75*this.height-2),t.restore()}detectMouseOver(){super.detectMouseOver(),this.game.detectMouseOver(this)&&!this.game.wireMode&&this.game.container?.classList.add("curser-pointer")}detectMouseDown(){super.detectMouseDown()}detectMouseUp(){super.detectMouseUp(),this.draggable=!1,this.game.container?.classList.replace("curser-grabbing","curser-grab")}detectClick(t,e){super.detectClick(t,e),this.game.detectMouseOver(this)&&!this.game.wireMode&&(this.#y=!this.#y)}detectDbClick(){super.detectDbClick()}}class d extends n{#x=0;#v=.05;#b;#M;#B;#C;#f;#m;constructor(t,e,i,s){super(t,e,i,0,0),this.isStatic=!0,this.#M=!0,this.#b=[],this.#f={type:"input1",value:s,visible:!0,x:e,y:i},this.inputs=[this.#f],this.outputs=[]}get lineCords(){return this.#b}set lineCords(t){this.#b=t}get inputGate(){return this.#B}set inputGate(t){this.#B=t}get outputGate(){return this.#C}set outputGate(t){this.#C=t}get constructing(){return this.#M}set constructing(t){this.#M=t}update(){super.update(),1===this.inputs[0].value&&this.#x<1?this.#x+=this.#v:0===this.inputs[0].value&&this.#x>0&&(this.#x-=this.#v),this.#x>1?this.#x=1:this.#x<0&&(this.#x=0),this.#B&&this.outputGate&&(this.#B.inputs.length>=this.#B.outputs.length?this.#B.inputs.length:this.#B.outputs.length)}draw(t){super.draw(t),t.save();const e=t.createLinearGradient(this.x,this.y,this.#M?this.game.mousePos.x:this.#b[this.#b.length-1].x,this.#M?this.game.mousePos.y:this.#b[this.#b.length-1].y);e.addColorStop(this.#x,"red"),e.addColorStop(this.#x,"black"),t.strokeStyle=e,t.beginPath();for(let e=0;e<this.#b.length;e+=1)0===e&&t.moveTo(this.#b[e].x,this.#b[e].y),t.lineTo(this.#b[e].x,this.#b[e].y);this.#M&&t.lineTo(this.game.mousePos.x,this.game.mousePos.y),t.stroke(),t.restore()}detectMouseOver(){super.detectMouseOver()}detectMouseDown(){super.detectMouseDown()}detectMouseUp(){super.detectMouseUp()}detectClick(t,e){super.detectClick(t,e),this.game.wireMode&&this.game.wireBuildMode&&(this.#M&&this.lineCords.push({x:t,y:e}),this.game.gates.forEach((t=>{const e=t.inputs.length>=t.outputs.length?t.inputs.length:t.outputs.length;for(let i=0;i<e;i+=1)t.inputs[i]&&this.game.detectMouseOver({x:t.inputs[i].x-5,y:t.inputs[i].y-5,width:15,height:15})&&(this.#C=t,this.#M&&this.#b.splice(this.#b.length-1,1,{x:t.inputs[i].x,y:t.inputs[i].y})),t.outputs[i]&&this.game.detectMouseOver({x:t.outputs[i].x-5,y:t.outputs[i].y-5,width:15,height:15})&&(this.#B=t,this.#M&&this.#b.splice(this.#b.length-1,1,{x:t.outputs[i].x,y:t.outputs[i].y}))})))}detectDbClick(){super.detectDbClick(),this.game.gates.forEach((t=>{const e=t.inputs.length>=t.outputs.length?t.inputs.length:t.outputs.length;for(let i=0;i<e;i+=1)t.inputs[i]&&this.game.detectMouseOver({x:t.inputs[i].x-5,y:t.inputs[i].y-5,width:15,height:15})&&(this.#M=!1,this.game.wireBuildMode=!1),t.outputs[i]&&this.game.detectMouseOver({x:t.outputs[i].x-5,y:t.outputs[i].y-5,width:15,height:15})&&(this.#M=!1,this.game.wireBuildMode=!1)}))}}class c extends n{#k;constructor(t,e,i,s,h){super(t,e,i,s,h),this.#k=[]}get wires(){return this.#k}set wires(t){this.#k=t}update(){super.update()}draw(t){super.draw(t)}detectMouseOver(){if(super.detectMouseOver(),this.game.wireMode||this.game.deleteMode||!this.game.detectMouseOver(this))if(this.game.wireMode){const t=this.inputs.length>=this.outputs.length?this.inputs.length:this.outputs.length;for(let e=0;e<t;e+=1)this.inputs[e]&&this.game.detectMouseOver({x:this.inputs[e].x-5,y:this.inputs[e].y-5,width:15,height:15})&&this.game.wireMode&&document.getElementById("canvasContainer")?.classList.add("curser-pointer"),this.outputs[e]&&this.game.detectMouseOver({x:this.outputs[e].x-5,y:this.outputs[e].y-5,width:15,height:15})&&this.game.wireMode&&document.getElementById("canvasContainer")?.classList.add("curser-pointer")}else this.game.deleteMode&&this.game.detectMouseOver(this)&&this.game.container?.classList.replace("curser-grab","curser-pointer");else document.getElementById("canvasContainer")?.classList.add("curser-grab")}detectMouseDown(){super.detectMouseDown(),!this.game.detectMouseOver(this)||this.game.wireMode||this.game.deleteMode||0!==this.#k.length||(document.getElementById("canvasContainer")?.classList.replace("curser-grab","curser-grabbing"),this.draggable=!0)}detectMouseUp(){super.detectMouseUp(),this.game.gates.forEach((t=>{document.getElementById("canvasContainer")?.classList.replace("curser-grabbing","curser-grab"),t.draggable=!1}))}detectClick(t,e){if(super.detectClick(t,e),this.game.wireMode&&!this.game.wireBuildMode){const t=this.inputs.length>=this.outputs.length?this.inputs.length:this.outputs.length;for(let e=0;e<t;e+=1){if(this.inputs[e]&&this.game.detectMouseOver({x:this.inputs[e].x-5,y:this.inputs[e].y-5,width:15,height:15})){this.game.wireBuildMode=!0;const t=new d(this.game,this.inputs[e].x,this.inputs[e].y,0);t.inputGate=this,this.#k.push(t),this.game.wires.push(t)}if(this.outputs[e]&&this.game.detectMouseOver({x:this.outputs[e].x-5,y:this.outputs[e].y-5,width:15,height:15})){this.game.wireBuildMode=!0;const t=new d(this.game,this.outputs[e].x,this.outputs[e].y,this.outputs[e].value);t.outputGate=this,this.#k.push(t),this.game.wires.push(t)}}}this.game.deleteMode&&this.game.detectMouseOver(this)&&(this.shouldDelete=!0)}detectDbClick(){super.detectDbClick()}}class l extends c{#f;#m;constructor(t,e,i,s,h){super(t,e,i,s,h),this.#f={type:"input1",value:0,x:e,y:i+.5*this.height,visible:!0},this.#m={type:"output1",value:0,x:e+this.width,y:i+.5*this.height,visible:!0},this.inputs=[this.#f],this.outputs=[this.#m]}get input(){return this.#f}set input(t){this.#f=t}get output(){return this.#m}set output(t){this.#m=t}update(){super.update(),this.#f.x=this.x,this.#f.y=this.y+.5*this.height,this.#m.x=this.x+this.width,this.output.y=this.y+.5*this.height}draw(t){super.draw(t),t.save(),this.#f.visible&&this.#m.visible&&(t.beginPath(),t.moveTo(this.#f.x,this.#f.y),t.lineTo(this.#f.x+.25*this.width,this.#f.y),t.stroke(),t.beginPath(),t.moveTo(this.#m.x,this.#m.y),t.lineTo(this.#m.x-.25*this.width,this.#m.y),t.stroke(),this.game.wireMode&&(t.beginPath(),t.arc(this.#f.x,this.#f.y,5,0,2*Math.PI,!1),t.stroke(),t.beginPath(),t.arc(this.#m.x,this.#m.y,5,0,2*Math.PI,!1),t.stroke())),t.restore()}detectMouseOver(){super.detectMouseOver()}detectMouseDown(){super.detectMouseDown()}detectMouseUp(){super.detectMouseUp()}detectClick(){super.detectClick()}detectDbClick(){super.detectDbClick()}}class g extends l{static invert(t){return 1===t?0:1}constructor(t,e,i,s){super(t,e,i,60,36),this.bgColor="blue",this.input.value=s,this.output.value=g.invert(s)}update(){super.update()}draw(t){super.draw(t),t.save(),t.beginPath(),t.fillStyle=this.bgColor,t.strokeStyle=this.borderColor,t.beginPath(),t.moveTo(this.x+.75*this.width,this.y+.5*this.height),t.lineTo(this.x+.25*this.width,this.y),t.lineTo(this.x+.25*this.width,this.y+this.height),t.closePath(),t.fill(),t.stroke(),t.restore()}}class p extends c{#P;#D;#m;constructor(t,e,i,s,h){super(t,e,i,s,h),this.#P={type:"input1",value:0,visible:!0,x:e,y:i+.25*this.height},this.#D={type:"input2",value:0,visible:!0,x:e,y:i+.75*this.height},this.#m={type:"output",value:0,visible:!0,x:e+this.width,y:i+.5*this.height},this.inputs=[this.#P,this.#D],this.outputs=[this.#m]}get input1(){return this.#P}set input1(t){this.#P=t}get input2(){return this.#D}set input2(t){this.#D=t}get output(){return this.#m}set output(t){this.#m=t}update(){super.update(),this.#P.x=this.x,this.#P.y=this.y+.25*this.height,this.#D.x=this.x,this.#D.y=this.y+.75*this.height,this.#m.x=this.x+this.width,this.#m.y=this.y+.5*this.height}draw(t){super.draw(t),t.save(),this.#P.visible&&this.#D.visible&&this.#m.visible&&(t.beginPath(),t.moveTo(this.#P.x,this.#P.y),t.lineTo(this.#P.x+.25*this.width,this.#P.y),t.stroke(),t.beginPath(),t.moveTo(this.#D.x,this.#D.y),t.lineTo(this.#D.x+.25*this.width,this.#D.y),t.stroke(),t.beginPath(),t.moveTo(this.#m.x,this.#m.y),t.lineTo(this.#m.x-.25*this.width,this.#m.y),t.stroke(),this.game.wireMode&&(t.beginPath(),t.arc(this.#P.x,this.#P.y,5,0,2*Math.PI,!1),t.stroke(),t.beginPath(),t.arc(this.#D.x,this.#D.y,5,0,2*Math.PI,!1),t.stroke(),t.beginPath(),t.arc(this.output.x,this.output.y,5,0,2*Math.PI,!1),t.stroke())),t.restore()}detectMouseOver(){super.detectMouseOver()}detectMouseDown(){super.detectMouseDown()}detectMouseUp(){super.detectMouseUp()}detectClick(){super.detectClick()}detectDbClick(){super.detectDbClick()}}class w extends p{static calculateOutput([t,e]){return t&&e?1:0}constructor(t,e,i,s){super(t,e,i,60,parseInt("36")),this.radius=.5*this.height,this.bgColor="red",this.input1.value=s[0],this.input2.value=s[1],this.output.value=w.calculateOutput(s)}update(){super.update()}draw(t){super.draw(t),t.save(),t.beginPath(),t.fillStyle=this.bgColor,t.strokeStyle=this.borderColor,t.beginPath(),t.arc(this.x+.5*this.width,this.y+.5*this.height,this.radius,1.5*Math.PI,.5*Math.PI,!1),t.lineTo(this.x+.25*this.width,this.y+this.height),t.lineTo(this.x+.25*this.width,this.y),t.closePath(),t.fill(),t.stroke(),t.restore()}}class m extends p{static calculateOutput([t,e]){return t||e?1:0}constructor(t,e,i,s){super(t,e,i,60,36),this.radius=.5*this.height,this.bgColor="green",this.input1.value=s[0],this.input2.value=s[1],this.output.value=m.calculateOutput(s)}update(){super.update()}draw(t){super.draw(t),t.save(),t.beginPath(),t.fillStyle=this.bgColor,t.strokeStyle=this.borderColor,t.arc(this.x+.15*this.width,this.y+.5*this.height,this.radius,1.65*Math.PI,.35*Math.PI,!1),t.lineTo(this.x+.75*this.width,this.y+.5*this.height),t.closePath(),t.fill(),this.input1.visible&&(t.moveTo(this.x+.25*this.width,this.y+.25*this.height),t.lineTo(this.x+.75*this.width-this.radius,this.y+.25*this.height)),this.input2.visible&&(t.moveTo(this.x+.25*this.width,this.y+.75*this.height),t.lineTo(this.x+.75*this.width-this.radius,this.y+.75*this.height)),t.stroke(),t.restore()}}class y{#t;#O=[];#E={x:5,y:5,width:280,height:45};#T=[{x:10,y:10,width:60,height:36},{x:80,y:10,width:60,height:36},{x:150,y:10,width:60,height:36},{x:220,y:10,width:60,height:36}];#S={x:15+this.#E.width,y:5,width:60,height:20};#L={x:this.#S.x,y:this.#S.y+this.#S.height+5,width:this.#S.width,height:this.#S.height};constructor(t){this.#t=t,this.#O.push(new a(this.#t,10,10),new g(this.#t,80,10,0),new w(this.#t,150,10,[0,0]),new m(this.#t,220,10,[0,0])),this.#O.forEach((t=>{t.width=60,t.height=36,t.radius=.5*t.height,t.inputs?.forEach((t=>{t.visible=!1})),t.outputs?.forEach((t=>{t.visible=!1}))}))}get gateBox(){return this.#E}set gateBox(t){this.#E=t}get gateBoxes(){return this.#T}get wireBtn(){return this.#S}update(){this.#O.forEach((t=>{t.update()}))}draw(t){t.save(),t.beginPath(),t.strokeStyle="black",t.fillStyle="white",t.shadowOffsetX=-5,t.shadowOffsetY=-2,t.shadowBlur=5,t.shadowColor="gray",t.beginPath(),t.rect(this.#E.x,this.#E.y,this.#E.width,this.#E.height),t.fill(),t.stroke();const e=10;t.beginPath(),t.fillStyle="#666",t.moveTo(this.#S.x+e,this.#S.y),t.lineTo(this.#S.x+this.#S.width-e,this.#S.y),t.quadraticCurveTo(this.#S.x+this.#S.width,this.#S.y,this.#S.x+this.#S.width,this.#S.y+e),t.lineTo(this.#S.x+this.#S.width,this.#S.y+this.#S.height-e),t.quadraticCurveTo(this.#S.x+this.#S.width,this.#S.y+this.#S.height,this.#S.x+this.#S.width-e,this.#S.y+this.#S.height),t.lineTo(this.#S.x+e,this.#S.y+this.#S.height),t.quadraticCurveTo(this.#S.x,this.#S.y+this.#S.height,this.#S.x,this.#S.y+this.#S.height-e),t.lineTo(this.#S.x,this.#S.y+e),t.quadraticCurveTo(this.#S.x,this.#S.y,this.#S.x+e,this.#S.y),t.closePath(),t.fill(),t.stroke(),t.fillStyle="white",t.font="16px Helvetica",t.fillText("wire",this.#S.x+.25*this.#S.width,this.#S.y+.75*this.#S.height),t.beginPath(),t.fillStyle="#bd0b1d",t.moveTo(this.#L.x+e,this.#L.y),t.lineTo(this.#L.x+this.#L.width-e,this.#L.y),t.quadraticCurveTo(this.#L.x+this.#L.width,this.#L.y,this.#L.x+this.#L.width,this.#L.y+e),t.lineTo(this.#L.x+this.#L.width,this.#L.y+this.#L.height-e),t.quadraticCurveTo(this.#L.x+this.#L.width,this.#L.y+this.#L.height,this.#L.x+this.#L.width-e,this.#L.y+this.#L.height),t.lineTo(this.#L.x+e,this.#L.y+this.#L.height),t.quadraticCurveTo(this.#L.x,this.#L.y+this.#L.height,this.#L.x,this.#L.y+this.#L.height-e),t.lineTo(this.#L.x,this.#L.y+e),t.quadraticCurveTo(this.#L.x,this.#L.y,this.#L.x+e,this.#L.y),t.closePath(),t.fill(),t.stroke(),t.fillStyle="white",t.font="16px Helvetica",t.fillText("Delete",this.#L.x+.15*this.#L.width,this.#L.y+.75*this.#L.height),t.restore(),this.#T.forEach((({x:e,y:i,width:s,height:h})=>{t.beginPath(),t.rect(e,i,s,h),t.stroke()})),this.#O.forEach((e=>{e.draw(t)}))}detectMouseOver(){this.#t.detectMouseOver(this.#S)&&this.#t.container?.classList.add("curser-pointer"),this.#t.detectMouseOver(this.#L)&&this.#t.container?.classList.add("curser-pointer"),this.#T.forEach((t=>{this.#t.detectMouseOver(t)&&!this.#t.wireMode&&this.#t.container?.classList.add("curser-grab")}))}detectMouseDown(){this.#t.detectMouseOver(this.#E)&&this.#t.ui.gateBoxes.forEach(((t,e)=>{if(this.#t.detectMouseOver(t)&&!this.#t.wireMode)switch(e){case 0:this.#t.container?.classList.replace("curser-grab","curser-grabbing");const t=new a(this.#t,this.#t.mousePos.x,this.#t.mousePos.y);t.draggable=!0,this.#t.switches.push(t);break;case 1:this.#t.container?.classList.replace("curser-grab","curser-grabbing");const e=new g(this.#t,this.#t.mousePos.x,this.#t.mousePos.y,0);e.draggable=!0,this.#t.gates.push(e);break;case 2:this.#t.container?.classList.replace("curser-grab","curser-grabbing");const i=new w(this.#t,this.#t.mousePos.x,this.#t.mousePos.y,[0,0]);i.draggable=!0,this.#t.gates.push(i);break;case 3:this.#t.container?.classList.replace("curser-grab","curser-grabbing");const s=new m(this.#t,this.#t.mousePos.x,this.#t.mousePos.y,[0,0]);s.draggable=!0,this.#t.gates.push(s)}}))}detectMouseUp(){}detectClick(){this.#t.detectMouseOver(this.wireBtn)&&(this.#t.wireMode?this.#t.wireMode=!1:this.#t.wireMode=!0),this.#t.detectMouseOver(this.#L)&&this.#t.toggleDeleteMode()}detectDbClick(){}}class x{#r;#u;#U={x:0,y:0};#I=[];#G=[];#k=[];#A=document.getElementById("canvasContainer");#q;#R=new y(this);#H=0;#W=!1;#F=!1;#V=!1;constructor(e,i){this.#r=e,this.#u=i,this.#q=new t(this)}get ui(){return this.#R}get container(){return this.#A}get gates(){return this.#I}set gates(t){this.#I=t}get switches(){return this.#G}set switches(t){this.switches=t}get wires(){return this.#k}set wires(t){this.#k=t}get mousePos(){return this.#U}set mousePos(t){this.#U=t}get timer(){return this.#H}set timer(t){this.#H=t}get wireMode(){return this.#W}set wireMode(t){this.#W=t}get wireBuildMode(){return this.#F}set wireBuildMode(t){this.#F=t}get deleteMode(){return this.#V}set deleteMode(t){this.#V=t}toggleDeleteMode(){this.#V=!this.#V}update(t){this.#H+=t,this.#I.forEach((t=>{t.update()})),this.#G.forEach((t=>{t.update()})),this.#k.forEach((t=>{t.update()})),this.#R.update(),this.#I=this.#I.filter((t=>!t.shouldDelete)),this.#G=this.#G.filter((t=>!t.shouldDelete))}draw(t){this.#W&&(t.save(),t.fillStyle="white",t.strokeStyle="green",t.lineWidth=4,t.beginPath(),t.strokeRect(2,2,this.#r-4,this.#u-4),t.restore()),this.#V&&(t.save(),t.fillStyle="white",t.strokeStyle="red",t.lineWidth=4,t.beginPath(),t.strokeRect(2,2,this.#r-4,this.#u-4),t.restore()),this.#I.forEach((e=>{e.draw(t)})),this.#G.forEach((e=>{e.draw(t)})),this.#k.forEach((e=>{e.draw(t)})),this.#R.draw(t)}detectMouseMove(t,e){this.#A?.classList.remove("curser-grab","curser-pointer","curser-grabbing"),this.#U={x:t-30,y:e-28}}detectCollision(t,e){return t.x<e.x+e.width&&t.x+t.width>e.x&&t.y<e.y+e.height&&t.y+t.height>e.y}detectMouseOver(t){return this.#U.x>t.x&&this.#U.x<t.x+t.width&&this.#U.y>t.y&&this.#U.y<t.y+t.height}}window.addEventListener("load",(()=>{const t=document.getElementById("canvasContainer"),e=document.createElement("canvas"),i=e.getContext("2d");t&&(e.width=t.offsetWidth-4,e.height=t.offsetHeight-8,e.width>=t.offsetWidth&&t.classList.add("customScroll"),t?.append(e)),window.addEventListener("resize",(i=>{i.preventDefault(),e.width=t?.offsetWidth??0,e.height=t?.offsetHeight??0}));const s=new x(e.width,e.height);let h=0;!function t(r){const u=r-h;h=r,i?.clearRect(0,0,e.width,e.height),s.update(u),i&&s.draw(i),requestAnimationFrame(t)}(0)}))})();
